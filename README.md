# برنامه نقاشی (Paint App)

این پروژه یک برنامه نقاشی تحت وب است که با استفاده از React توسعه یافته است. کاربران می‌توانند اشکال مختلفی را به بوم اضافه کنند، آن‌ها را جابجا یا حذف کنند، اندازه آن‌ها را تغییر دهند و نقاشی خود را ذخیره یا بارگذاری نمایند.

## ویژگی‌ها

- افزودن اشکال (دایره، مربع، مثلث) با کشیدن و رها کردن (Drag & Drop)
- انتخاب و تغییر اندازه هر شکل به صورت پویا
- جابجایی اشکال با ماوس و مشاهده پیش‌نمایش هنگام جابجایی
- حذف شکل با دوبار کلیک روی آن
- ذخیره (Export) و بارگذاری (Import) نقاشی به صورت فایل JSON
- نمایش تعداد هر نوع شکل در پایین صفحه
- رابط کاربری مدرن و واکنش‌گرا

---

## ساختار کد و توضیحات فایل‌ها

### بخش فرانت‌اند (Frontend)

#### App.js

کامپوننت اصلی برنامه که وضعیت کلی (state) را مدیریت می‌کند. مسئولیت مدیریت لیست اشکال، نام نقاشی، انتخاب و تغییر اندازه اشکال، عملیات وارد کردن و صادر کردن نقاشی، و ارتباط بین سایر کامپوننت‌ها را بر عهده دارد. همچنین منطق Drag & Drop برای افزودن اشکال جدید و نمایش پیش‌نمایش شکل در حال کشیدن در این فایل پیاده‌سازی شده است.

#### Canvas.js

کامپوننت بوم نقاشی که با استفاده از SVG اشکال را نمایش می‌دهد. مسئولیت رندر اشکال، مدیریت رویدادهای ماوس برای جابجایی و انتخاب اشکال، افزودن یا حذف اشکال، و پیاده‌سازی منطق Drag & Drop روی بوم را بر عهده دارد. همچنین امکان تغییر موقعیت اشکال با کشیدن آن‌ها روی بوم فراهم شده است.

#### Sidebar.js

نوار کناری برای نمایش و کشیدن اشکال مختلف (دایره، مربع، مثلث). شامل آیکون‌های SVG برای هر شکل و منطق Drag & Drop برای افزودن اشکال به بوم. همچنین پیش‌نمایش شکل در حال کشیدن را مدیریت می‌کند.

#### Header.js

هدر برنامه که شامل ورودی نام نقاشی و دکمه‌های Import/Export است. مدیریت تعاملات کاربر با فایل‌ها و نام نقاشی در این بخش انجام می‌شود.

#### ShapeCount.js

کامپوننتی برای نمایش تعداد هر نوع شکل (دایره، مربع، مثلث) در پایین صفحه به صورت زنده و واکنش‌گرا. این بخش به صورت خودکار با تغییر لیست اشکال به‌روزرسانی می‌شود.

#### App.css

استایل‌های کلی برنامه شامل ظاهر بوم، نوار کناری، هدر و اشکال. طراحی مدرن و واکنش‌گرا برای تجربه کاربری بهتر و نمایش مناسب در دستگاه‌های مختلف.

#### index.js

نقطه شروع برنامه React و رندر کامپوننت App در DOM. این فایل مسئول راه‌اندازی برنامه و اتصال آن به عنصر اصلی صفحه HTML است.

---

## بخش بک‌اند (Backend)

### server.js

این فایل سرور Node.js با استفاده از Express است که یک API ساده برای ذخیره و بازیابی نقاشی‌ها فراهم می‌کند. داده‌ها در یک دیتابیس SQLite ذخیره می‌شوند.

#### ویژگی‌ها

- ذخیره نقاشی‌ها به ازای هر کاربر (username)
- بازیابی لیست نقاشی‌های ذخیره‌شده برای هر کاربر
- ذخیره داده‌ها به صورت JSON در دیتابیس SQLite
- فعال بودن CORS برای ارتباط با فرانت‌اند

#### وابستگی‌ها

- express
- cors
- sqlite3
- body-parser

#### ساختار دیتابیس

جدول `drawings` شامل ستون‌های زیر است:
- `id`: کلید اصلی (auto increment)
- `username`: نام کاربری
- `data`: داده نقاشی (JSON)
- `timestamp`: زمان ذخیره

#### مسیرهای API

- `POST /api/drawings`
  - ورودی:  
    ```json
    {
      "username": "user1",
      "data": {
        "drawingName": "My Drawing",
        "shapes": [ ... ]
      }
    }
    ```
  - خروجی:  
    ```json
    { "id": 1 }
    ```

- `GET /api/drawings/:username`
  - خروجی:  
    ```json
    [
      {
        "id": 1,
        "data": { "drawingName": "...", "shapes": [...] },
        "timestamp": "2024-06-01 12:34:56"
      },
      ...
    ]
    ```

---

## نحوه اجرا

### راه‌اندازی فرانت‌اند

۱. ابتدا مطمئن شوید Node.js و npm روی سیستم شما نصب است.

۲. در پوشه پروژه، وابستگی‌ها را نصب کنید:
```bash
npm install
```

۳. برنامه را اجرا کنید:
```bash
npm start
```

۴. برنامه در مرورگر و معمولاً در آدرس `http://localhost:3000` قابل مشاهده است.

### راه‌اندازی بک‌اند

۱. مطمئن شوید Node.js روی سیستم نصب است.

۲. وابستگی‌های بک‌اند را نصب کنید:
```bash
npm install express cors sqlite3 body-parser
```

۳. سرور را اجرا کنید:
```bash
node server.js
```

۴. سرور روی پورت `4000` اجرا می‌شود و API آماده استفاده است.

---

## نکات

- برای ذخیره و بارگذاری نقاشی‌ها، باید نام کاربری وارد شود.
- دیتابیس SQLite به صورت فایل `drawings.db` در کنار فایل سرور ایجاد می‌شود.
- ارتباط بین فرانت‌اند و بک‌اند از طریق API و با فعال بودن CORS انجام می‌شود.
